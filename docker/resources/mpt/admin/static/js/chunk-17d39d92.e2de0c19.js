(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17d39d92"],{"52ab":function(t,e,s){"use strict";var r=s("71df"),o=s.n(r);o.a},"71df":function(t,e,s){},cf05:function(t,e,s){t.exports=s.p+"static/img/logo.a4c95d27.png"},dd7b:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Row",{staticClass:"login",attrs:{type:"flex",justify:"center",align:"middle"},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitLogin(e):null}}},[r("Col",{staticClass:"login-col",attrs:{xs:{span:22}}},[r("div",[r("Row",{staticClass:"header"},[r("img",{staticClass:"header-logo",attrs:{src:s("cf05")}}),t._v(" "),r("div",{staticClass:"description"},[t._v(t._s(t.$t("appName")))])]),t._v(" "),t.error?r("Alert",{attrs:{type:"error","show-icon":""}},[t._v(t._s(t.errorMsg))]):t._e(),t._v(" "),r("Row",{staticClass:"login-form"},[r("Form",{ref:"usernameLoginForm",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[r("FormItem",{attrs:{prop:"username"}},[r("Input",{attrs:{prefix:"ios-contact",size:"large",clearable:"",placeholder:"请输入用户名",autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",prefix:"ios-lock",size:"large",clearable:"",placeholder:"请输入密码",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),t._v(" "),r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[r("Checkbox",{attrs:{size:"large"},model:{value:t.saveLogin,callback:function(e){t.saveLogin=e},expression:"saveLogin"}},[t._v("自动登录")]),t._v(" "),r("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.handleDropDown}},[r("a",{staticClass:"forget-pass"},[t._v("\n              忘记密码\n            ")]),t._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{attrs:{name:"showAccount"}},[t._v("体验测试账号")])],1)],1)],1),t._v(" "),r("Row",[r("Button",{staticClass:"login-btn",attrs:{type:"primary",size:"large",loading:t.loading,long:""},on:{click:t.submitLogin}},[t.loading?r("span",[t._v("登录中...")]):r("span",[t._v("登录")])])],1),t._v(" "),r("router-link",{attrs:{to:"/regist"}},[r("div",{staticClass:"forget-pass"},[t._v("注册账户")])])],1)],1),t._v(" "),r("Row",{staticClass:"foot"},[r("Row",{staticClass:"code-row-bg help",attrs:{type:"flex",justify:"space-around"}},[r("a",{staticClass:"item",attrs:{href:"#",target:"_blank"}},[t._v("帮助")]),t._v(" "),r("a",{staticClass:"item",attrs:{href:"#",target:"_blank"}},[t._v("隐私")]),t._v(" "),r("a",{staticClass:"item",attrs:{href:"#",target:"_blank"}},[t._v("条款")])]),t._v(" "),r("Row",{staticClass:"code-row-bg copyright",attrs:{type:"flex",justify:"center"}},[t._v("\n        Copyright © 2019 - Present "),r("a",{staticStyle:{margin:"0 5px"},attrs:{href:"#",target:"_blank"}},[t._v(t._s(t.$t("power")))]),t._v(" 版权所有\n      ")])],1)],1)],1)},o=[],a=s("f499"),n=s.n(a),i=(s("7f7f"),s("ac6a"),s("a78e")),c=s.n(i),l=s("365c"),u=s("c276"),f={data:function(){var t=function(t,e,s){var r=/^[1][3,4,5,7,8][0-9]{9}$/;r.test(e)?s():s(new Error("手机号格式错误"))};return{error:!1,errorMsg:"",tabName:"username",saveLogin:!0,loading:!1,sending:!1,sended:!1,count:60,countButton:"60 s",maxLength:6,errorCode:"",form:{username:"admin",password:"123456",mobile:"暂不支持",code:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{showErrorMsg:function(t){this.error=!0,this.errorMsg=t},sendVerify:function(){var t=this;this.$refs.mobileLoginForm.validate(function(e){e&&t.showErrorMsg("功能待开发")})},countDown:function(){var t=this;if(0===this.count)return this.sended=!1,void(this.count=60);this.countButton=this.count+" s",this.count--,setTimeout(function(){t.countDown()},1e3)},submitLogin:function(){var t=this;"username"===this.tabName?this.$refs.usernameLoginForm.validate(function(e){e&&(t.loading=!0,Object(l["S"])({username:t.form.username,password:t.form.password,saveLogin:t.saveLogin}).then(function(e){!0===e.success?(t.setStore("accessToken",e.result),Object(l["cb"])().then(function(e){if(!0===e.success){delete e.result.permissions;var s=[];e.result.roles.forEach(function(t){s.push(t.name)}),t.setStore("roles",s),t.saveLogin?c.a.set("userInfo",n()(e.result),{expires:7}):c.a.set("userInfo",n()(e.result)),t.setStore("userInfo",e.result),t.$store.commit("setAvatarPath",e.result.avatar),u["a"].initRouter(t),t.$router.push({name:"home_index"})}else t.loading=!1})):t.loading=!1}))}):"mobile"===this.tabName&&this.$refs.mobileLoginForm.validate(function(e){if(e){if(""===t.form.code)return void(t.errorCode="验证码不能为空");t.errorCode="",t.showErrorMsg("功能待开发")}})},relatedLogin:function(){},handleDropDown:function(t){"showAccount"==t?this.showAccount():"resetByMobile"==t?this.showErrorMsg("功能待开发"):"resetByEmail"==t&&this.showErrorMsg("功能待开发")},showAccount:function(){},showMessage:function(){this.$Notice.success({title:"已升级至iView3.0",desc:"完善多项功能，包括数据权限、部门管理、定时任务、数据字典、前端模版等 修复已知BUG",duration:5})}},mounted:function(){this.showAccount(),this.relatedLogin()}},d=f,m=(s("52ab"),s("0c7c")),g=Object(m["a"])(d,r,o,!1,null,null,null);e["default"]=g.exports}}]);