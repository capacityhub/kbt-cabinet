(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e4c0e5d","chunk-0433b54e"],{"0a49":function(e,t,r){var i=r("9b43"),n=r("626a"),o=r("4bf8"),a=r("9def"),s=r("cd1c");e.exports=function(e,t){var r=1==e,l=2==e,c=3==e,u=4==e,f=6==e,p=5==e||f,d=t||s;return function(t,s,m){for(var g,h,v=o(t),b=n(v),w=i(s,m,3),_=a(b.length),x=0,U=r?d(t,_):l?d(t,0):void 0;_>x;x++)if((p||x in b)&&(g=b[x],h=w(g,x,v),e))if(r)U[x]=h;else if(h)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:U.push(g)}else if(u)return!1;return f?-1:c||u?u:U}}},1169:function(e,t,r){var i=r("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"268f":function(e,t,r){e.exports=r("fde4")},"28a5":function(e,t,r){r("214f")("split",2,function(e,t,i){"use strict";var n=r("aae3"),o=i,a=[].push,s="split",l="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[l]||2!="ab"[s](/(?:ab)*/)[l]||4!="."[s](/(.?)(.?)/)[l]||"."[s](/()()/)[l]>1||""[s](/.?/)[l]){var u=void 0===/()??/.exec("")[1];i=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!n(e))return o.call(r,e,t);var i,s,f,p,d,m=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,v=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,g+"g");u||(i=new RegExp("^"+b.source+"$(?!\\s)",g));while(s=b.exec(r)){if(f=s.index+s[0][l],f>h&&(m.push(r.slice(h,s.index)),!u&&s[l]>1&&s[0].replace(i,function(){for(d=1;d<arguments[l]-2;d++)void 0===arguments[d]&&(s[d]=void 0)}),s[l]>1&&s.index<r[l]&&a.apply(m,s.slice(1)),p=s[0][l],h=f,m[l]>=v))break;b[c]===s.index&&b[c]++}return h===r[l]?!p&&b.test("")||m.push(""):m.push(r.slice(h)),m[l]>v?m.slice(0,v):m}}else"0"[s](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(r,n){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,n):i.call(String(o),r,n)},i]})},"32a6":function(e,t,r){var i=r("241e"),n=r("c3a1");r("ce7e")("keys",function(){return function(e){return n(i(e))}})},"3c88":function(e,t,r){},"70c2":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,disabled:e.disableAll}},[r("div",{staticClass:"form-title"},[e._v("基本信息")]),e._v(" "),r("el-form-item",{attrs:{label:"应用名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入名称",maxlength:"20"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("div",{staticClass:"input-info-text"},[e._v("长度不可超过20个字符")])],1),e._v(" "),r("el-form-item",{attrs:{label:"应用简介",prop:"profile"}},[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入应用简介",maxlength:"100"},model:{value:e.form.profile,callback:function(t){e.$set(e.form,"profile",t)},expression:"form.profile"}}),e._v(" "),r("div",{staticClass:"input-info-text"},[e._v("长度不可超过100个字符")])],1),e._v(" "),r("el-form-item",{attrs:{label:"应用来源",prop:"channel"}},[r("el-input",{attrs:{placeholder:"请输入应用来源",maxlength:"20"},model:{value:e.form.channel,callback:function(t){e.$set(e.form,"channel",t)},expression:"form.channel"}}),e._v(" "),r("div",{staticClass:"input-info-text"},[e._v("长度不可超过20个字符")])],1),e._v(" "),r("div",{staticClass:"form-line"}),e._v(" "),r("div",{staticClass:"form-title"},[e._v("应用信息")]),e._v(" "),r("el-form-item",{attrs:{label:"应用首页地址",prop:"applicationUrl"}},[r("el-input",{attrs:{placeholder:"请输入地址，如http://www.baidu.com"},model:{value:e.form.applicationUrl,callback:function(t){e.$set(e.form,"applicationUrl",t)},expression:"form.applicationUrl"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"发布类型",prop:"onlineType"}},[r("el-radio-group",{model:{value:e.form.onlineType,callback:function(t){e.$set(e.form,"onlineType",t)},expression:"form.onlineType"}},[r("el-radio",{attrs:{label:"0"}},[e._v("手动上架")])],1)],1),e._v(" "),r("div",{staticClass:"form-line"}),e._v(" "),r("div",{staticClass:"form-title"},[e._v("图标素材")]),e._v(" "),r("el-form-item",{attrs:{label:"应用图标",required:!0}},[r("el-upload",{class:e.showLogoWarning?"logo-upload logo-upload-warning":"logo-upload",attrs:{action:e.uploadFileUrl,"show-file-list":!1,"on-success":e.logoUploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeLogoUpload}},[e.form.logoUrl?r("img",{attrs:{src:e.form.logoUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),e.form.logoUrl&&!e.disableAll?r("div",{staticClass:"logo-update"},[e._v("修改")]):e._e()]),e._v(" "),e.showLogoWarning?r("div",{staticClass:"logo-warning"},[e._v(e._s(e.showLogoWarning))]):e._e(),e._v(" "),r("div",{staticClass:"img-prompt"},[e._v("图片格式必须为bmp、jpeg、jpg、png，大小在200k以内，建议图片尺寸为152*152")])],1),e._v(" "),!e.disableAll||e.disableAll&&e.imageUrl[0]?r("el-form-item",{attrs:{label:"应用预览图",required:!0}},[r("div",{staticClass:"preview-img"},e._l(e.imageUrl,function(t,i){return!e.disableAll||e.disableAll&&""!=t?r("el-upload",{key:i,class:e.showPreviewWarning?"img-upload logo-upload-warning":"img-upload",attrs:{action:e.uploadFileUrl,multiple:!1,"show-file-list":!1,"on-success":function(t){return e.handleImgSuccess(t,i)},"on-error":e.uploadError,"before-upload":e.beforeImgUpload}},[e.imageUrl[i]?r("img",{attrs:{src:e.imageUrl[i]}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),e.imageUrl[i]&&!e.disableAll?r("div",{staticClass:"img-delete",on:{click:function(t){t.stopPropagation(),e.deleteImg(i)}}},[e._v("删除")]):e._e()]):e._e()})),e._v(" "),e.showPreviewWarning?r("div",{staticClass:"logo-warning"},[e._v(e._s(e.showPreviewWarning))]):e._e(),e._v(" "),r("div",{staticClass:"img-prompt"},[e._v("图片格式必须为bmp、jpeg、jpg、png，不可大于2M，建议图片尺寸为480*800或720*1280")])]):e._e()],1)},n=[],o=(r("6b54"),r("28a5"),r("7f7f"),r("7514"),r("cebc")),a=r("365c"),s=r("2f62"),l={name:"app-info",data:function(){return{form:{},arranges:[{id:0,name:"热门应用"},{id:1,name:"系统应用"}],uploadFileUrl:a["bb"],imageUrl:[""],rules:{name:[{required:!0,message:"请输入应用名称",trigger:"blur"},{max:20,message:"长度不可超出20个字符",trigger:"blur"}],applicationUrl:[{required:!0,message:"请输入应用地址",trigger:"blur"}],profile:[{required:!0,message:"请输入应用简介",trigger:"blur"},{max:100,message:"长度不可超出100个字符",trigger:"blur"}],channel:[{required:!0,message:"请选择应用来源",trigger:"blur"},{max:20,message:"长度不可超出20个字符",trigger:"blur"}],onlineType:[{required:!0,message:"请选择上线类型",trigger:"change"}]},showLogoWarning:"",showPreviewWarning:"",disableAll:!1}},props:["formData","disabled"],created:function(){this.disabled?this.disableAll=this.disabled:this.getArrangeLists(),this.form=this.formData,this.setData()},watch:{formData:{handler:function(e,t){this.form=e,this.setData()},deep:!0}},computed:Object(o["a"])({},Object(s["d"])({arrangeList:function(e){return e.arrange.arrangeList}}),{getArrangeName:function(){var e=this,t=this.arranges.find(function(t){return t.id==e.form.arrangeId});return t.name}}),methods:Object(o["a"])({},Object(s["b"])({GetArrangeList:"arrange/GetArrangeList"}),{setData:function(){this.form.previewImg&&""!=this.form.previewImg&&(this.imageUrl=this.form.previewImg.split(";").filter(function(e){return""!=e})),this.$set(this.form,"onlineType",this.form.onlineType.toString()),this.form.arrangeId||this.$set(this.form,"arrangeId",this.arranges[0].id)},getArrangeLists:function(){var e=this;this.GetArrangeList().then(function(t){200==t&&(e.arranges=e.arrangeList)})},logoUploadSuccess:function(e,t){this.form.logoUrl=e.result,this.showLogoWarning=""},beforeLogoUpload:function(e){var t=e.type,r=-1!=t.indexOf("jpeg")||-1!=t.indexOf("jpg")||-1!=t.indexOf("png")||-1!=t.indexOf("bmp"),i=e.size/1024<200;return r||(this.showLogoWarning="上传的图片必须是png,jpg,jpeg，bmp格式"),i||(this.showLogoWarning="上传的图片大小不能超过200KB"),r&&i},handleImgSuccess:function(e,t){this.$set(this.imageUrl,t,e.result),this.imageUrl.length>0&&(this.form.previewImg=this.imageUrl.join(";"))},beforeImgUpload:function(e){var t=e.type,r=-1!=t.indexOf("jpeg")||-1!=t.indexOf("jpg")||-1!=t.indexOf("png")||-1!=t.indexOf("bmp"),i=e.size/1024/1024<2;return r||this.$message.error("上传的图片必须是png,jpg,jpeg，bmp格式之一!"),i||this.$message.error("上传的图片大小不能超过2M!"),r&&i},uploadError:function(e,t,r){this.$message.error("上传图片失败!")},setArrangeName:function(e){this.form.arrangeName=this.getArrangeName},deleteImg:function(e){this.imageUrl.splice(e,1,""),this.form.previewImg=this.imageUrl.join(";")},logoImgCheck:function(){this.showLogoWarning="请上传应用图标"},previewCheck:function(){this.showPreviewWarning="请上传应用预览图"},checkForm:function(){var e=!1;this.$refs["form"].validate(function(t){e=!!t});var t=""!=this.form.logoUrl,r=""!=this.form.previewImg;return t||this.logoImgCheck(),r||this.previewCheck(),t&&r&&e},checkDraftForm:function(){var e=!1;this.$refs["form"].validateField(["name","applicationUrl"],function(t){console.log("draft -valid :",t),e=""==t});var t=""!=this.form.logoUrl;return t||this.logoImgCheck(),e&&t}})},c=l,u=(r("73a9"),r("0c7c")),f=Object(u["a"])(c,i,n,!1,null,null,null);t["default"]=f.exports},7213:function(e,t,r){},"73a9":function(e,t,r){"use strict";var i=r("7213"),n=r.n(i);n.a},7514:function(e,t,r){"use strict";var i=r("5ca1"),n=r("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(o)},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},a4bb:function(e,t,r){e.exports=r("8aae")},bf90:function(e,t,r){var i=r("36c3"),n=r("bf0b").f;r("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return n(i(e),t)}})},c94d:function(e,t,r){"use strict";var i=r("3c88"),n=r.n(i);n.a},cd1c:function(e,t,r){var i=r("e853");e.exports=function(e,t){return new(i(e))(t)}},ce7e:function(e,t,r){var i=r("63b6"),n=r("584a"),o=r("294c");e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],a={};a[e]=t(r),i(i.S+i.F*o(function(){r(1)}),"Object",a)}},cebc:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r("268f"),n=r.n(i),o=r("e265"),a=r.n(o),s=r("a4bb"),l=r.n(s),c=r("bd86");function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=l()(r);"function"===typeof a.a&&(i=i.concat(a()(r).filter(function(e){return n()(r,e).enumerable}))),i.forEach(function(t){Object(c["a"])(e,t,r[t])})}return e}},e265:function(e,t,r){e.exports=r("ed33")},e853:function(e,t,r){var i=r("d3f4"),n=r("1169"),o=r("2b4c")("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),i(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols},f4be:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"编辑应用",visible:e.visibleDialog,"append-to-body":!0,"close-on-press-escape":!1,"close-on-click-modal":!1,"before-close":e.beforeClose},on:{"update:visible":function(t){e.visibleDialog=t}}},[r("div",{staticClass:"updata-form"},[r("router-view"),e._v(" "),r("AppInfo",{ref:"update",staticStyle:{width:"100%"},attrs:{formData:e.form}}),e._v(" "),r("div",{staticClass:"btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onCancel}},[e._v("取消")])],1)],1)])},n=[],o=r("cebc"),a=(r("6b54"),r("2f62")),s=r("70c2"),l={components:{AppInfo:s["default"]},data:function(){return{form:{name:"",profile:"",applicationUrl:"",arrangeName:"",arrangeId:"",onlineType:"0",status:"",logoUrl:"",previewImg:""},updateMessage:"修改成功",visibleDialog:!1}},props:["showUpdateForm","id"],created:function(){var e=this;this.visibleDialog=this.showUpdateForm,this.GetAppInfo(this.id).then(function(t){e.form=e.appInfo,e.$set(e.form,"onlineType",e.form.onlineType.toString())})},computed:Object(o["a"])({},Object(a["d"])({appInfo:function(e){return e.application.appInfo}})),methods:Object(o["a"])({},Object(a["b"])({GetAppInfo:"application/GetAppInfo",EditApp:"application/EditApp"}),{onSubmit:function(){var e=this;this.form=this.$refs.update.form,this.form.status=this.appInfo.status;var t=!1;0==this.form.status?t=this.$refs.update.checkDraftForm():3==this.form.status&&(t=this.$refs.update.checkForm()),t&&this.updateApp(function(t){200==t?(e.updateMessage="修改成功",e.resultBox(function(){e.closeUpdate()})):(e.updateMessage="操作失败，请稍后再试",e.resultBox(function(){}))})},onCancel:function(){this.closeUpdate()},updateApp:function(e){this.EditApp(this.form).then(function(t){e(t)}).catch(function(t){e(t)})},resultBox:function(e){this.$alert(this.updateMessage,"提示",{confirmButtonText:"确定",callback:function(t){e()}})},closeUpdate:function(){this.visibleDialog=!1,this.$emit("closeDialog","showUpdateForm"),this.$emit("reloadList")},beforeClose:function(e){var t=this;this.$confirm("关闭后将不会对应用的修改进行保存，确认关闭？","提示").then(function(){t.$emit("closeDialog","showUpdateForm"),e()}).catch(function(){})}})},c=l,u=(r("c94d"),r("0c7c")),f=Object(u["a"])(c,i,n,!1,null,null,null);t["default"]=f.exports},fde4:function(e,t,r){r("bf90");var i=r("584a").Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}}}]);