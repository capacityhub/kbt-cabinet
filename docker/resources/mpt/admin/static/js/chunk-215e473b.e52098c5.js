(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-215e473b","chunk-182a3362"],{"3c88":function(t,e,a){},"3efb":function(t,e,a){},"4aea":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"查看应用",visible:t.visibleDialog,"append-to-body":!0,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visibleDialog=e},close:t.closeDialog}},[a("div",{staticClass:"detail-form"},[a("AppInfo",{ref:"info",staticStyle:{width:"100%"},attrs:{formData:t.form,disabled:!0}}),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSure}},[t._v("确定")])],1)],1)])},n=[],s=a("cebc"),o=a("2f62"),l=a("70c2"),c={components:{AppInfo:l["default"]},data:function(){return{form:{name:"",profile:"",applicationUrl:"",arrangeName:"",arrangeId:"",onlineType:"0",status:"",logoUrl:"",previewImg:""},visibleDialog:!1}},props:["showDetailForm","id"],created:function(){var t=this;this.visibleDialog=this.showDetailForm,console.log(this.visibleDialog),this.GetAppInfo(this.id).then(function(e){t.form=t.appInfo})},computed:Object(s["a"])({},Object(o["d"])({appInfo:function(t){return t.application.appInfo}})),methods:Object(s["a"])({},Object(o["b"])({GetAppInfo:"application/GetAppInfo"}),{onSure:function(){this.visibleDialog=!1},closeDialog:function(){this.$emit("closeDialog","showDetailForm")}})},r=c,p=(a("5453"),a("0c7c")),u=Object(p["a"])(r,i,n,!1,null,null,null);e["default"]=u.exports},5453:function(t,e,a){"use strict";var i=a("b7b8"),n=a.n(i);n.a},7559:function(t,e,a){},a717:function(t,e,a){"use strict";var i=a("3efb"),n=a.n(i);n.a},b7b8:function(t,e,a){},c77f:function(t,e,a){"use strict";var i=a("7559"),n=a.n(i);n.a},c94d:function(t,e,a){"use strict";var i=a("3c88"),n=a.n(i);n.a},caea:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{data:t.tableData,border:"","header-cell-style":t.setHeaderColor,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"应用来源",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:t.timeLable,align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{effect:"dark",content:"查看",placement:"bottom"}},[2==e.row.status?a("i",{staticClass:"list-icon icon-details",on:{click:function(a){t.handleDetail(e.row.id)}}}):t._e()]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"bottom"}},[2!=e.row.status?a("i",{staticClass:"list-icon icon-edit",on:{click:function(a){t.handleEdit(e.row.id)}}}):t._e()]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"上线",placement:"bottom"}},[2!=e.row.status?a("i",{staticClass:"list-icon icon-online",on:{click:function(a){t.handleOnline(e.row.id)}}}):t._e()]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"下线",placement:"bottom"}},[2==e.row.status?a("i",{staticClass:"list-icon icon-offline",on:{click:function(a){t.handleOffline(e.row.id)}}}):t._e()]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[2!=e.row.status?a("i",{staticClass:"list-icon icon-delete",on:{click:function(a){t.handleDelete(e.row.id)}}}):t._e()])]}}])})],1)},n=[],s={name:"app-list",data:function(){return{timeLable:"上线时间"}},props:["tableData"],watch:{tableData:function(t){if(t.length>0){var e=t[0].status;this.timeLable=2==e?"上线时间":3==e?"下线时间":"保存时间"}}},methods:{setHeaderColor:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#e8ebf2":""},handleEdit:function(t){this.$emit("editApp",t)},handleDetail:function(t){this.$emit("appDetail",t)},handleOnline:function(t){this.$emit("onlineApp",t)},handleOffline:function(t){this.$emit("offlineApp",t)},handleDelete:function(t){this.$emit("deleteApp",t)}}},o=s,l=(a("c77f"),a("0c7c")),c=Object(l["a"])(o,i,n,!1,null,null,null);e["default"]=c.exports},ea50:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-manage"},[a("div",{staticClass:"list-header"},[a("div",{staticClass:"list-search"},[a("el-input",{attrs:{placeholder:"请输入应用名称","prefix-icon":"el-icon-search",clearable:""},on:{input:t.watchSearchInput,focus:t.watchSearchInput,blur:t.closeSearchResult},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isSearch,expression:"isSearch"}],staticClass:"search-result"},[t._l(t.searchResults,function(e){return a("div",{key:e.id,staticClass:"search-result-item",on:{click:function(a){t.clickSearchItem(e.id)}}},[a("div",{staticClass:"search-result-name"},[t._v(t._s(t.searchName(e.name)))]),t._v(" "),a("div",{staticClass:"search-result-status"},[t._v(t._s(2==e.status?"已上线":3==e.status?"已下线":"草稿箱"))])])}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:""!=t.searchText&&0==t.searchResults.length,expression:"searchText!='' && searchResults.length==0"}],staticClass:"search-result-null"},[t._v("没有符合条件的结果")])],2)],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.createApp}},[t._v("创建应用")])],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.listStatus,callback:function(e){t.listStatus=e},expression:"listStatus"}},[a("el-tab-pane",{attrs:{label:t.onlineLable,name:"2"}},[a("AppList",{attrs:{tableData:t.tableData},on:{deleteApp:t.appDelete,editApp:t.appEdit,appDetail:t.appDetail,onlineApp:t.appOnline,offlineApp:t.appOffline}}),t._v(" "),a("div",{staticClass:"list-page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"page-count":t.totalPages},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:t.offlineLable,name:"3"}},[a("AppList",{attrs:{tableData:t.tableData},on:{deleteApp:t.appDelete,editApp:t.appEdit,appDetail:t.appDetail,onlineApp:t.appOnline,offlineApp:t.appOffline}}),t._v(" "),a("div",{staticClass:"list-page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"page-count":t.totalPages},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:t.draftLable,name:"0"}},[a("AppList",{attrs:{tableData:t.tableData},on:{deleteApp:t.appDelete,editApp:t.appEdit,appDetail:t.appDetail,onlineApp:t.appOnline,offlineApp:t.appOffline}}),t._v(" "),a("div",{staticClass:"list-page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"page-count":t.totalPages},on:{"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),t.showCreateForm?a("AppAdd",{attrs:{showCreateForm:t.showCreateForm},on:{closeDialog:t.closeDialog,reloadList:t.getList}}):t._e(),t._v(" "),t.showDetailForm?a("AppDetail",{attrs:{showDetailForm:t.showDetailForm,id:t.currentId},on:{closeDialog:t.closeDialog}}):t._e(),t._v(" "),t.showUpdateForm?a("AppUpdate",{attrs:{showUpdateForm:t.showUpdateForm,id:t.currentId},on:{closeDialog:t.closeDialog,reloadList:t.getList}}):t._e()],1)},n=[],s=(a("7514"),a("7f7f"),a("cebc")),o=a("2f62"),l=a("caea"),c=a("f713"),r=a("4aea"),p=a("f4be"),u={components:{AppList:l["default"],AppAdd:c["default"],AppDetail:r["default"],AppUpdate:p["default"]},data:function(){return{listStatus:"2",tableData:[],onlineLable:"已上线",offlineLable:"已下线",draftLable:"草稿箱",pageSize:8,pageNumber:1,totalPages:0,confirmText:"确认删除？",showCreateForm:!1,showDetailForm:!1,showUpdateForm:!1,currentId:0,isSearch:!1,searchText:"",searchResults:[]}},created:function(){this.getList()},computed:Object(s["a"])({},Object(o["d"])({appList:function(t){return t.application.appList},totalPage:function(t){return t.application.totalPages}}),{searchName:function(){return function(t){return t}}}),methods:Object(s["a"])({},Object(o["b"])({GetAppList:"application/GetAppList",DeleteApp:"application/DeleteApp",EditApp:"application/EditApp"}),Object(o["c"])({SetAppInfo:"application/GET_APP_INFO"}),{getList:function(){var t=this,e={status:this.listStatus,pageSize:this.pageSize,pageNumber:this.pageNumber};this.GetAppList(e).then(function(e){200==e&&(t.tableData=t.appList,t.totalPages=t.totalPage)})},tabClick:function(t){this.listStatus=t.name,this.getList()},createApp:function(){this.showCreateForm=!0},appEdit:function(t){this.showUpdateForm=!0,this.currentId=t},appDetail:function(t){this.showDetailForm=!0,this.currentId=t},closeDialog:function(t){this[t]=!1},appOnline:function(t){var e=this;this.confirmText="上线后该应用会显示在客户端中，确认上线吗？",this.confirmBox(function(a){if(a){var i=e.getInfoById(t);i.status=2,e.EditApp(i).then(function(t){200==t?(e.getList(),e.$message.success("应用上线成功")):e.$message.error("错误码："+t+"，应用上线失败")}).catch(function(t){e.$message.error("应用上线失败,错误："+t)})}})},appOffline:function(t){var e=this;this.confirmText="下线后该应用将不会显示在客户端中，确认下线吗？",this.confirmBox(function(a){if(a){var i=e.getInfoById(t);i.status=3,e.EditApp(i).then(function(t){200==t?(e.getList(),e.$message.success("应用下线成功")):e.$message.error("错误码："+t+"，应用下线失败")}).catch(function(t){e.$message.error("应用下线失败,错误："+t)})}})},appDelete:function(t){var e=this;this.confirmText="确定删除该应用吗？",this.confirmBox(function(a){a&&e.DeleteApp(t).then(function(t){200==t?e.$message.success("应用删除成功"):e.$message.error("错误码："+t+"，应用删除失败")}).catch(function(t){e.$message.error("应用删除失败,错误："+t)})})},getInfoById:function(t){var e=this.tableData,a=e.find(function(e){return e.id==t});return a},confirmBox:function(t){this.$confirm(this.confirmText,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t(!0)}).catch(function(){t(!1)})},handleCurrentChange:function(t){this.pageNumber=t,this.getList()},watchSearchInput:function(){var t=this,e=this.searchText;this.timer&&clearTimeout(this.timer),""!=e?(this.isSearch=!0,this.timer=setTimeout(function(){t.searchData(e)},600)):(this.searchResults.splice(0,this.searchResults.length),this.closeSearchResult())},closeSearchResult:function(){(this.searchResults.length>0&&""==this.searchText||""==this.searchText||0==this.searchResults.length)&&(this.isSearch=!1)},searchData:function(t){var e=this,a={name:t};this.GetAppList(a).then(function(t){200==t&&(e.searchResults=e.appList)})},clickSearchItem:function(t){this.appDetail(t)}})},f=u,h=(a("a717"),a("0c7c")),d=Object(h["a"])(f,i,n,!1,null,null,null);e["default"]=d.exports},f4be:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"编辑应用",visible:t.visibleDialog,"append-to-body":!0,"close-on-press-escape":!1,"close-on-click-modal":!1,"before-close":t.beforeClose},on:{"update:visible":function(e){t.visibleDialog=e}}},[a("div",{staticClass:"updata-form"},[a("router-view"),t._v(" "),a("AppInfo",{ref:"update",staticStyle:{width:"100%"},attrs:{formData:t.form}}),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onCancel}},[t._v("取消")])],1)],1)])},n=[],s=a("cebc"),o=(a("6b54"),a("2f62")),l=a("70c2"),c={components:{AppInfo:l["default"]},data:function(){return{form:{name:"",profile:"",applicationUrl:"",arrangeName:"",arrangeId:"",onlineType:"0",status:"",logoUrl:"",previewImg:""},updateMessage:"修改成功",visibleDialog:!1}},props:["showUpdateForm","id"],created:function(){var t=this;this.visibleDialog=this.showUpdateForm,this.GetAppInfo(this.id).then(function(e){t.form=t.appInfo,t.$set(t.form,"onlineType",t.form.onlineType.toString())})},computed:Object(s["a"])({},Object(o["d"])({appInfo:function(t){return t.application.appInfo}})),methods:Object(s["a"])({},Object(o["b"])({GetAppInfo:"application/GetAppInfo",EditApp:"application/EditApp"}),{onSubmit:function(){var t=this;this.form=this.$refs.update.form,this.form.status=this.appInfo.status;var e=!1;0==this.form.status?e=this.$refs.update.checkDraftForm():3==this.form.status&&(e=this.$refs.update.checkForm()),e&&this.updateApp(function(e){200==e?(t.updateMessage="修改成功",t.resultBox(function(){t.closeUpdate()})):(t.updateMessage="操作失败，请稍后再试",t.resultBox(function(){}))})},onCancel:function(){this.closeUpdate()},updateApp:function(t){this.EditApp(this.form).then(function(e){t(e)}).catch(function(e){t(e)})},resultBox:function(t){this.$alert(this.updateMessage,"提示",{confirmButtonText:"确定",callback:function(e){t()}})},closeUpdate:function(){this.visibleDialog=!1,this.$emit("closeDialog","showUpdateForm"),this.$emit("reloadList")},beforeClose:function(t){var e=this;this.$confirm("关闭后将不会对应用的修改进行保存，确认关闭？","提示").then(function(){e.$emit("closeDialog","showUpdateForm"),t()}).catch(function(){})}})},r=c,p=(a("c94d"),a("0c7c")),u=Object(p["a"])(r,i,n,!1,null,null,null);e["default"]=u.exports}}]);